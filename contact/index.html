<!DOCTYPE html>
<html>
    <head>
        <!--META-->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--TITLE-->
        <title>Contact</title>

        <!--LINK-->
        <link rel="icon" href="/assets/beau_spirit.png">
        <link rel="stylesheet" href="../style/style.css">
        <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>

    <body>
        <div class="header">
            <!--IMAGE-->
        <a href="https://www.mattbrigidi.com">
            <img class="me" src="/assets/brigidi_head_shot.jpg">
        </a>    

         <!--NAV BAR-->
        <nav class="topnav" id="myTopnav">

            <!--NAV OPTIONS-->
            <!-- <li><a href="/"> Home</a></li>
            <li>|</li> -->
            <!-- Responsive Menu Icon -->
            <a href="javascript:void(0);" class="icon" onclick="myFunction()">
                <i class="fa fa-bars"></i>
              </a>
            <a href="/"> Home</a>
            <a href="/about/"> About</a>
            <a href="/tutorials/"> Tutorials</a>
            <a href="/contact/"> Contact</a>
            
        </nav>
        </div>

        <!--CONTENT START-->
        <div class="container">
        <h1>
            Contact
        </h1>
        <p>
            I am passionate about my work and love to connect with others. Please use the contact form below if you are interested in dicussing anything on this site â€” I will do my best to follow-up promptly!
        </p>
        </div>

        <!-- HTML FORM -->
        <div class="form-container" >
            <form id="contact-form" action="https://script.google.com/macros/s/AKfycbyRlFJcqhv_Vqrt6G2cXB52czly6K6YbA4g7gMutrka70_yOFPMbMZp6_WOKvU1GPvX/exec" method="POST">

            <!--INPUT BOX-->
            <div class="input-box">
                <input type="text" name="contact-name" placeholder=" " required>
                <span>Name</span>
            </div>

            <!--INPUT BOX-->
            <div class="input-box">
                <input type="email" name="contact-email" placeholder=" " required>
                <span>E-mail</span>
            </div>

            <!--TEXT AREA-->
            <div class="input-box">
                <textarea name="contact-message" placeholder=" " maxlength="300" required></textarea>
                <span>Message</span>
                <!-- <div id="char-count">300 characters remaining</div> -->
                <div class="char-circle">
                    <span id="char-count"></span>
                </div>
            </div>

            <!--BUTTON-->
            <button class="submit-btn">
                Submit
            </button>
        </form>
        

       <!--SCRIPT-->
       <script>
        document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault();
            
            fetch('https://script.google.com/macros/s/AKfycbyRlFJcqhv_Vqrt6G2cXB52czly6K6YbA4g7gMutrka70_yOFPMbMZp6_WOKvU1GPvX/exec', {
                method: 'POST',
                body: new URLSearchParams(new FormData(this))
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    alert('Message sent successfully!');
                    // Optionally reset the form
                    this.reset();
    
                    // Reset character count
                    const textarea = document.querySelector('textarea[name="contact-message"]');
                    const charCount = document.getElementById('char-count');
                    const charCircle = document.querySelector('.char-circle');
                    const maxChars = 300;
    
                    // Reset the character count display
                    charCount.textContent = maxChars;
    
                    // Reset the textarea value and character count visualization
                    textarea.value = '';
                    charCircle.style.background = `conic-gradient(#59b6b6 0deg, lightgrey 0deg)`;
                } else {
                    alert('Failed to send message.');
                }
            })
            .catch(error => {
                alert('Error: ' + error);
            });
        });
    
        /* circle */
        const textarea = document.querySelector('textarea[name="contact-message"]');
        const charCount = document.getElementById('char-count');
        const charCircle = document.querySelector('.char-circle');
        const maxChars = 300;
    
        textarea.addEventListener('input', () => {
            const charsTyped = textarea.value.length;
            const remainingChars = maxChars - charsTyped;
            charCount.textContent = remainingChars;
    
            // Calculate the degree for the conic gradient
            const fillDegree = (charsTyped / maxChars) * 360;
            charCircle.style.background = `conic-gradient(#59b6b6 ${fillDegree}deg, lightgrey ${fillDegree}deg)`;
        });


        /* responsive function */
            function myFunction() {
              var x = document.getElementById("myTopnav");
              if (x.className === "topnav") {
                x.className += " responsive";
              } else {
                x.className = "topnav";
              }
            }

    </script>
    
        
    </body>
</html>